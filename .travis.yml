language: ruby
sudo: false
cache: bundler
rvm:
  - 2.0
  - 2.1
  - 2.2
  - 2.3
  - 2.4
  - ruby-head
  - rbx-3
os:
  - linux
  - osx
matrix:
  include:
  - rvm: 1.9
    before_install: &UPDATE_BUNDLER_BEFORE_INSTALL
      - gem update --system
      - gem update bundler
      - gem cleanup bundler
    os: linux
  - rvm: 1.9
    before_install: *UPDATE_BUNDLER_BEFORE_INSTALL
    os: osx
  - rvm: jruby-head
    before_install: *UPDATE_BUNDLER_BEFORE_INSTALL
    os: osx
  - rvm: jruby-head
    os: linux
  fast_finish: true
  allow_failures:
    - os: osx
deploy:
  provider: rubygems
  api_key:
    secure: KcBpkFaes74KGMm8X/rRA8e13+t3PmkefsAvOAR+iF4g1GyuLSPkP92Fb9vFfsXBph+qmFh5rNa2lIRf/3RXW6COxY7CMMaARxUfJOKE0rmIwF0qfKI+RZDh6abg92iYngunMZVN8WVft6Lv9ZTOYCWxr1Zs1Ll/Rl4PfvHNd1g=
  gem: travis
  on:
    repo: travis-ci/travis.rb
    ruby: 2.0
    condition: "$(uname) = Linux"
